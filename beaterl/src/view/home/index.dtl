<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!--Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>BeatERL</title>

    <link href="static/css/foundation.css" rel="stylesheet">
    <link href="static/css/beaterl.css" rel="stylesheet">
  </head>
  <body>
    {% verbatim %}
    <script type="text/x-handlebars" data-template-name="application">
      <div class="row">
        <div class="twelve columns">
          <h2>Music</h2>
          <hr>
          <p>{{ outlet }}</p>
        </div>
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="albums">
      <div class="row">
        <div class="four columns" id="playlist">
          {{render playlist}}
        </div>
        <div class="three columns" id="albums">
          {{ partial "albumsList" }}
        </div>
        <div class="five columns" id="album">
          {{ outlet }}
        </div>
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="playlist">
      <h2>Playlist</h2>
      {{ render player }}
      {{controller}}
      <ul>
        {{#each album in controller}}
        {{ render playlistAlbum album}}
        {{/each}}
      </ul>
    </script>

    <script type="text/x-handlebars" data-template-name="playlistAlbum">
      <li>
        {{album.name}} - {{album.artist}}
        <button class="queue remove" {{action dequeueAlbum this.content}}>-</button>
      </li>
    </script>

    <script type="text/x-handlebars" data-template-name="albums/index">
      <h2>Select an Album at left</h2>
    </script>

    <script type="text/x-handlebars" data-template-name="_albumsList">
      <h2>Albums</h2>
      <ul id="albums-list">
        {{#each album in controller}}
        <li>{{#linkTo 'album' album class="foo"}}{{ album.name }}{{/linkTo}}</li>
        {{/each}}
      </ul>
    </script>

    <script type="text/x-handlebars" data-template-name="album/_edit">

      <p>{{view Ember.TextField valueBinding='name'}}</p>
      <p>{{view Ember.TextField valueBinding='artist'}}</p>
      <ol>
      {{#each track in tracks}}
        <li>{{view Ember.TextField valueBinding='track.name'}}</li>
      {{/each}}
      </ol>
    </script>

    <script type="text/x-handlebars" data-template-name="album">
      <div class="row">
        {{#if isEditing}}
          {{partial 'album/edit'}}
          <button {{action 'doneEditing'}}>Done</button>
        {{else}}
          <button {{action 'edit'}}>Edit</button>
        {{/if}}
        <div class="eight columns">
          <h3>{{ name }}</h3>
          <p> by {{ artist }} <button {{action queueAlbum this}}>Play</button></p>
          {{controller}}
          <div class="six columns">
            <ol>
              {{#each tracks}}
              <li>{{name}}</li>
              {{/each}}
            </ol>
          </div>
          <div class="six columns">
            <img {{ bindAttr src="coverImage" }}>
          </div>
        </div>
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="player">
      {{controller}}<br/>
      {{isPlaying}}
      {{#if isPlaying}}
      <button class="control pause" {{action pause}}>Pause</button>
      {{else}}
      <button class="control play" {{action play}}>Play</button>
      {{/if}}
      <button class="control prev" {{action prev}}>Prev</button>
      <button class="control next" {{action next}}>Next</button>
    </script>

    {% endverbatim %}
    <script src="static/js/jquery-1.9.1.js"></script>
    <script src="static/js/handlebars-1.0.0-rc.4.js"></script>
    <script src="static/js/ember-1.0.0-rc.5.js"></script>
    <script src="static/js/ember-data-0.13.js"></script>
    <script src="static/js/beaterl.js"></script>
  </body>
</html>
